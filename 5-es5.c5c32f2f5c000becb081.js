function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,c=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw c}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"4fRq":function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var c=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),c[e]=t>>>((3&e)<<3)&255;return c}}},EcEN:function(t,e,n){var i=n("xDdU"),c=n("xk4V"),r=c;r.v1=i,r.v4=c,t.exports=r},I2ZF:function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0;return[n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]]].join("")}},fOOd:function(t,e,n){"use strict";n.r(e),n.d(e,"HomeModule",(function(){return dn}));var i=n("tyNb"),c=n("fXoL"),r=n("kt0X"),a=n("wZkO"),o=n("Vz2p"),s=function(){var t={EntitiesOnly:0,Both:1,None:2};return t[t.EntitiesOnly]="EntitiesOnly",t[t.Both]="Both",t[t.None]="None",t}();function u(t){return function(e,n){var i={ids:_toConsumableArray(n.ids),entities:Object.assign({},n.entities)},c=t(e,i);return c===s.Both?Object.assign({},n,i):c===s.EntitiesOnly?Object.assign(Object.assign({},n),{entities:i.entities}):n}}function p(t,e){var n=e(t);return Object(c.V)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function b(t){function e(e,n){var i=p(e,t);return i in n.entities?s.None:(n.ids.push(i),n.entities[i]=e,s.Both)}function n(t,n){var i,c=!1,r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){c=e(i.value,n)!==s.None||c}}catch(a){r.e(a)}finally{r.f()}return c?s.Both:s.None}function i(t,e){return e.ids=[],e.entities={},n(t,e),s.Both}function c(t,e){var n=(t instanceof Array?t:e.ids.filter((function(n){return t(e.entities[n])}))).filter((function(t){return t in e.entities})).map((function(t){return delete e.entities[t]})).length>0;return n&&(e.ids=e.ids.filter((function(t){return t in e.entities}))),n?s.Both:s.None}function r(e,n){var i={};return(e=e.filter((function(t){return t.id in n.entities}))).length>0?e.filter((function(e){return function(e,n,i){var c=Object.assign({},i.entities[n.id],n.changes),r=p(c,t),a=r!==n.id;return a&&(e[n.id]=r,delete i.entities[n.id]),i.entities[r]=c,a}(i,e,n)})).length>0?(n.ids=n.ids.map((function(t){return i[t]||t})),s.Both):s.EntitiesOnly:s.None}function a(e,i){var c,a=[],o=[],u=_createForOfIteratorHelper(e);try{for(u.s();!(c=u.n()).done;){var b=c.value,l=p(b,t);l in i.entities?o.push({id:l,changes:b}):a.push(b)}}catch(h){u.e(h)}finally{u.f()}var d=r(o,i),f=n(a,i);switch(!0){case f===s.None&&d===s.None:return s.None;case f===s.Both||d===s.Both:return s.Both;default:return s.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:u(e),addMany:u(n),addAll:u(i),setAll:u(i),setOne:u((function(e,n){var i=p(e,t);return i in n.entities?(n.entities[i]=e,s.EntitiesOnly):(n.ids.push(i),n.entities[i]=e,s.Both)})),updateOne:u((function(t,e){return r([t],e)})),updateMany:u(r),upsertOne:u((function(t,e){return a([t],e)})),upsertMany:u(a),removeOne:u((function(t,e){return c([t],e)})),removeMany:u(c),map:u((function(t,e){return r(e.ids.reduce((function(n,i){var c=t(e.entities[i]);return c!==e.entities[i]&&n.push({id:i,changes:c}),n}),[]).filter((function(t){return t.id in e.entities})),e)}))}}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,i=e.sortComparer,c={getInitialState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({ids:[],entities:{}},t)}},a={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},i=Object(r.q)(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),c=Object(r.q)(e,(function(t){return t.length}));return t?{selectIds:Object(r.q)(t,e),selectEntities:Object(r.q)(t,n),selectAll:Object(r.q)(t,i),selectTotal:Object(r.q)(t,c)}:{selectIds:e,selectEntities:n,selectAll:i,selectTotal:c}}},o=i?function(t,e){var n=b(t);function i(t,e){return c([t],e)}function c(e,n){var i=e.filter((function(e){return!(p(e,t)in n.entities)}));return 0===i.length?s.None:(l(i,n),s.Both)}function r(t,e){return e.entities={},e.ids=[],c(t,e),s.Both}function a(e,n){var i=[],c=e.filter((function(e){return function(e,n,i){if(!(n.id in i.entities))return!1;var c=Object.assign({},i.entities[n.id],n.changes),r=p(c,t);return delete i.entities[n.id],e.push(c),r!==n.id}(i,e,n)})).length>0;if(0===i.length)return s.None;var r=n.ids,a=[];return n.ids=n.ids.filter((function(t,e){return t in n.entities||(a.push(e),!1)})),l(i,n),!c&&a.every((function(t){return n.ids[t]===r[t]}))?s.EntitiesOnly:s.Both}function o(e,n){var i,r=[],o=[],u=_createForOfIteratorHelper(e);try{for(u.s();!(i=u.n()).done;){var b=i.value,l=p(b,t);l in n.entities?o.push({id:l,changes:b}):r.push(b)}}catch(h){u.e(h)}finally{u.f()}var d=a(o,n),f=c(r,n);switch(!0){case f===s.None&&d===s.None:return s.None;case f===s.Both||d===s.Both:return s.Both;default:return s.EntitiesOnly}}function l(n,i){n.sort(e);for(var c=[],r=0,a=0;r<n.length&&a<i.ids.length;){var o=n[r],s=p(o,t),u=i.ids[a];e(o,i.entities[u])<=0?(c.push(s),r++):(c.push(u),a++)}i.ids=c.concat(r<n.length?n.slice(r).map(t):i.ids.slice(a)),n.forEach((function(e,n){i.entities[t(e)]=e}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:u(i),updateOne:u((function(t,e){return a([t],e)})),upsertOne:u((function(t,e){return o([t],e)})),addAll:u(r),setAll:u(r),setOne:u((function(e,n){var c=p(e,t);return c in n.entities?(n.ids=n.ids.filter((function(t){return t!==c})),l([e],n),s.Both):i(e,n)})),addMany:u(c),updateMany:u(a),upsertMany:u(o),map:u((function(t,e){return a(e.ids.reduce((function(n,i){var c=t(e.entities[i]);return c!==e.entities[i]&&n.push({id:i,changes:c}),n}),[]),e)}))}}(n,i):b(n);return Object.assign(Object.assign(Object.assign({selectId:n,sortComparer:i},c),a),o)}var d=Object(r.n)("[Participants] Upsert One",Object(r.s)()),f=Object(r.n)("[Participants] Delete One",Object(r.s)()),h=l({sortComparer:function(t,e){return t.name.localeCompare(e.name)}}),g=h.getInitialState({ids:["0","1","2","3"],entities:{0:{id:"0",name:"Rohan"},1:{id:"1",name:"Kaushik"},2:{id:"2",name:"Dhrumil"},3:{id:"3",name:"Nishant"}}}),m=Object(r.p)(g,Object(r.r)(d,(function(t,e){var n=e.Participant;return h.upsertOne(n,t)})),Object(r.r)(f,(function(t,e){var n=e.id;return h.removeOne(n,t)}))),v=Object(r.n)("[Expense/API] Load Expenses",Object(r.s)()),O=Object(r.n)("[Expense] Add Expense",Object(r.s)()),y=Object(r.n)("[Expense/API] Upsert Expense",Object(r.s)()),k=Object(r.n)("[Expense/API] Add Expenses",Object(r.s)()),x=Object(r.n)("[Expense/API] Upsert Expenses",Object(r.s)()),I=Object(r.n)("[Expense/API] Update Expense",Object(r.s)()),j=Object(r.n)("[Expense/API] Update Expenses",Object(r.s)()),C=Object(r.n)("[Expense/API] Delete Expense",Object(r.s)()),P=Object(r.n)("[Expense/API] Delete Expenses",Object(r.s)()),S=Object(r.n)("[Expense/API] Clear Expenses"),B=Object(r.n)("[Expense] Add Participant",Object(r.s)()),T=Object(r.n)("[Expense] Remove Participant",Object(r.s)()),A=Object(r.n)("[Expense] Update Name In Participant",Object(r.s)()),w=Object(r.n)("[Expense] Update Amount In Participant",Object(r.s)()),M=Object(r.n)("[Expense] Update Payed By Participant",Object(r.s)()),_=l(),E=_.getInitialState({ids:["1231","1232","1233"],entities:{1231:{id:"1231",name:"Movie",amount:900,payedBy:"1",participantIds:["1","2","0"]},1232:{id:"1232",name:"Dinner",amount:400,payedBy:"2",participantIds:["2","3"]},1233:{id:"1233",name:"IceCream",amount:120,payedBy:"3",participantIds:["1","3"]}}}),F=Object(r.p)(E,Object(r.r)(O,(function(t,e){return _.addOne(e.expense,t)})),Object(r.r)(y,(function(t,e){return _.upsertOne(e.expense,t)})),Object(r.r)(k,(function(t,e){return _.addMany(e.expenses,t)})),Object(r.r)(x,(function(t,e){return _.upsertMany(e.expenses,t)})),Object(r.r)(I,(function(t,e){return _.updateOne(e.expense,t)})),Object(r.r)(j,(function(t,e){return _.updateMany(e.expenses,t)})),Object(r.r)(C,(function(t,e){return _.removeOne(e.id,t)})),Object(r.r)(P,(function(t,e){return _.removeMany(e.ids,t)})),Object(r.r)(v,(function(t,e){return _.setAll(e.expenses,t)})),Object(r.r)(S,(function(t){return _.removeAll(t)})),Object(r.r)(M,(function(t,e){return _.updateOne({id:e.expenseId,changes:{payedBy:e.payedById}},t)})),Object(r.r)(w,A,(function(t,e){return _.updateOne({id:e.expenseId,changes:Object.assign({},e)},t)})),Object(r.r)(B,(function(t,e){return _.updateOne({id:e.expenseId,changes:{participantIds:[].concat(_toConsumableArray(t.entities[e.expenseId].participantIds),[e.participantId])}},t)})),Object(r.r)(T,(function(t,e){var n=_toConsumableArray(t.entities[e.expenseId].participantIds);return n.splice(n.indexOf(e.participantId),1),_.updateOne({id:e.expenseId,changes:{participantIds:n}},t)}))),z=Object(r.n)("[Groups/API] Load Groupss",Object(r.s)()),U=Object(r.n)("[Groups/API] Add Groups",Object(r.s)()),q=Object(r.n)("[Groups/API] Upsert Groups",Object(r.s)()),G=Object(r.n)("[Groups/API] Add Groupss",Object(r.s)()),$=Object(r.n)("[Groups/API] Upsert Groupss",Object(r.s)()),N=Object(r.n)("[Groups/API] Update Groups",Object(r.s)()),L=Object(r.n)("[Groups/API] Update Groupss",Object(r.s)()),R=Object(r.n)("[Groups/API] Delete Groups",Object(r.s)()),W=Object(r.n)("[Groups/API] Delete Groupss",Object(r.s)()),D=Object(r.n)("[Groups/API] Clear Groupss"),V=Object(r.n)("[Group] Add expense",Object(r.s)()),H=Object(r.n)("[Group] remove expense",Object(r.s)()),Q=l(),X=Q.getInitialState({ids:["12311","12321"],entities:{12311:{id:"12311",name:"Group 1",expenseIds:["1231","1232"]},12321:{id:"12321",name:"Group 2",expenseIds:["1233"]}}}),K=Object(r.p)(X,Object(r.r)(U,(function(t,e){return Q.addOne(e.groups,t)})),Object(r.r)(q,(function(t,e){return Q.upsertOne(e.groups,t)})),Object(r.r)(G,(function(t,e){return Q.addMany(e.groupss,t)})),Object(r.r)($,(function(t,e){return Q.upsertMany(e.groupss,t)})),Object(r.r)(N,(function(t,e){return Q.updateOne(e.groups,t)})),Object(r.r)(L,(function(t,e){return Q.updateMany(e.groupss,t)})),Object(r.r)(R,(function(t,e){return Q.removeOne(e.id,t)})),Object(r.r)(W,(function(t,e){return Q.removeMany(e.ids,t)})),Object(r.r)(z,(function(t,e){return Q.setAll(e.groupss,t)})),Object(r.r)(D,(function(t){return Q.removeAll(t)})),Object(r.r)(V,(function(t,e){return console.log(e,[].concat(_toConsumableArray(t.entities[e.groupId].expenseIds),[e.expenseId])),Q.updateOne({id:e.groupId,changes:{expenseIds:[].concat(_toConsumableArray(t.entities[e.groupId].expenseIds),[e.expenseId])}},t)})),Object(r.r)(H,(function(t,e){var n=_toConsumableArray(t.entities[e.groupId].expenseIds);return n.splice(n.indexOf(e.expenseId),1),Q.updateOne({id:e.groupId,changes:{expenseIds:n}},t)})));Q.getSelectors();var Z=Object(r.o)("home"),Y=h.getSelectors(),J=Y.selectEntities,tt=Y.selectAll,et=Y.selectIds,nt=Object(r.q)(Z,(function(t){return t.participants})),it=Object(r.q)(nt,tt),ct=Object(r.q)(nt,et),rt=Object(r.q)(nt,J),at=(Object(r.q)(rt,o.b,(function(t,e){return e&&t[e.state.params.id]})),_.getSelectors()),ot=at.selectEntities,st=at.selectAll,ut=Object(r.q)(Z,(function(t){return t.expenses})),pt=Object(r.q)(ut,st),bt=Object(r.q)(ut,ot),lt=(Object(r.q)(bt,o.b,(function(t,e){return e&&t[e.state.params.id]})),Object(r.q)(bt,(function(t,e){return t[e]}))),dt=Object(r.q)(lt,rt,(function(t,e){return t?t.participantIds.map((function(t){return e[t]})):[]})),ft=Object(r.q)(lt,dt,(function(t,e){return Object.assign(Object.assign({},t),{participantIds:e})})),ht=Object(r.q)(bt,rt,(function(t,e){return Object.keys(t).map((function(n){return Object.assign(Object.assign({},t[n]),{payedBy:e[t[n].payedBy.toString()],participantIds:t[n].participantIds.map((function(t){return e[t]}))})}))})),gt=Q.getSelectors(),mt=gt.selectEntities,vt=gt.selectAll,Ot=Object(r.q)(Z,(function(t){return t.groups})),yt=Object(r.q)(Ot,vt),kt=Object(r.q)(Ot,mt),xt=(Object(r.q)(kt,o.b,(function(t,e){return e&&t[e.state.params.id].expenseIds})),Object(r.q)(kt,o.b,bt,(function(t,e,n){return console.log("debug grps",t,t[e.state.params.id],n),e&&t[e.state.params.id].expenseIds.map((function(t){return n[t.toString()]}))})));Object(r.q)(kt,(function(t,e){return t[e]})),Object(r.q)(kt,rt,(function(t,e){return Object.keys(t).map((function(n){return Object.assign(Object.assign({},t[n]),{expenseIds:t[n].expenseIds.map((function(t){return e[t]}))})}))}));var It=n("EcEN"),jt=n("XiUz"),Ct=n("ofXK"),Pt=n("Wp6s"),St=n("znSr"),Bt=n("bTqV"),Tt=n("6NWb"),At=function(t){return{selectedGroup:t}};function wt(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Tb(1,"mat-card",4),c.bc("click",(function(){c.rc(n);var t=e.$implicit;return c.fc().select(t)})),c.Ac(2),c.Sb(),c.Sb()}if(2&t){var i=e.$implicit,r=c.fc();c.Bb(1),c.kc("ngClass",c.mc(2,At,i.id==r.selectedGroup)),c.Bb(1),c.Cc(" ",i.name," ")}}function Mt(t,e){if(1&t){var n=c.Ub();c.Tb(0,"button",5),c.bc("click",(function(){return c.rc(n),c.fc().add=!0})),c.Pb(1,"fa-icon",6),c.Sb()}}function _t(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card",7),c.Tb(1,"input",8),c.bc("change",(function(t){return c.rc(n),c.fc().nameChange(t)})),c.Sb(),c.Tb(2,"fa-icon",9),c.bc("click",(function(){return c.rc(n),c.fc().addGroup()})),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(1),c.kc("value",i.grpName)}}var Et,Ft=((Et=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.router=n,this.allGroups$=this.store.pipe(Object(r.t)(yt)),this.grpName="",this.selectedGroup=null,this.add=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){}},{key:"ngDoCheck",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"trackBackExpense",value:function(t,e){return e.id}},{key:"select",value:function(t){console.log("hoiu ",t),this.selectedGroup=t.id,this.router.navigate(["home/group",t.id])}},{key:"nameChange",value:function(t){this.grpName=t.target.value}},{key:"addGroup",value:function(){this.add=!1,console.log("Add Group",this.grpName),this.store.dispatch(U({groups:{id:Object(It.v4)(),name:this.grpName,expenseIds:[]}})),this.grpName=""}}]),t}()).\u0275fac=function(t){return new(t||Et)(c.Ob(r.h),c.Ob(i.f))},Et.\u0275cmp=c.Ib({type:Et,selectors:[["app-g-list"]],features:[c.zb],decls:5,vars:5,consts:[["fxLayout","row nowrap","fxLayoutAlign","center center",1,"gmain"],[4,"ngFor","ngForOf"],["mat-mini-fab","",3,"click",4,"ngIf"],["class","groupItem",4,"ngIf"],[1,"groupItem",3,"ngClass","click"],["mat-mini-fab","",3,"click"],["icon","plus"],[1,"groupItem"],[3,"value","change"],["mat-card-avatar","","icon","check",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.zc(1,wt,3,4,"div",1),c.gc(2,"async"),c.zc(3,Mt,2,0,"button",2),c.zc(4,_t,3,1,"mat-card",3),c.Sb()),2&t&&(c.Bb(1),c.kc("ngForOf",c.hc(2,3,e.allGroups$)),c.Bb(2),c.kc("ngIf",!e.add),c.Bb(1),c.kc("ngIf",e.add))},directives:[jt.f,jt.e,Ct.s,Ct.t,Pt.a,Ct.q,St.a,Bt.b,Tt.b,Pt.c],pipes:[Ct.b],styles:[""]}),Et);function zt(t,e){if(1&t&&(c.Tb(0,"mat-card",4),c.Ac(1),c.Sb()),2&t){var n=e.$implicit;c.Bb(1),c.Cc(" ",n.name," ")}}function Ut(t,e){if(1&t){var n=c.Ub();c.Tb(0,"button",5),c.bc("click",(function(){return c.rc(n),c.fc().add=!0})),c.Pb(1,"fa-icon",6),c.Sb()}}function qt(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card",4),c.Tb(1,"input",7),c.bc("change",(function(t){return c.rc(n),c.fc().onNameChange(t.target)})),c.Sb(),c.Tb(2,"fa-icon",8),c.bc("click",(function(){return c.rc(n),c.fc().onClick()})),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(1),c.kc("value",i.newParticipant)}}var Gt,$t,Nt=(($t=function(){function t(e){_classCallCheck(this,t),this.store=e,this.participants$=this.store.pipe(Object(r.t)(it)),this.newParticipant="",this.add=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onNameChange",value:function(t){var e=t.value;console.log(e),this.newParticipant=e}},{key:"onClick",value:function(){this.store.dispatch(d({Participant:{id:Object(It.v4)(),name:this.newParticipant}})),this.add=!1,this.newParticipant=""}}]),t}()).\u0275fac=function(t){return new(t||$t)(c.Ob(r.h))},$t.\u0275cmp=c.Ib({type:$t,selectors:[["app-p-list"]],decls:5,vars:5,consts:[["fxLayout","row nowrap","fxLayoutAlign","center center",1,"main"],["class","groupItem",4,"ngFor","ngForOf"],["mat-mini-fab","",3,"click",4,"ngIf"],["class","groupItem",4,"ngIf"],[1,"groupItem"],["mat-mini-fab","",3,"click"],["icon","plus"],[3,"value","change"],["mat-card-avatar","","icon","check",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.zc(1,zt,2,1,"mat-card",1),c.gc(2,"async"),c.zc(3,Ut,2,0,"button",2),c.zc(4,qt,3,1,"mat-card",3),c.Sb()),2&t&&(c.Bb(1),c.kc("ngForOf",c.hc(2,3,e.participants$)),c.Bb(2),c.kc("ngIf",!e.add),c.Bb(1),c.kc("ngIf",e.add))},directives:[jt.f,jt.e,Ct.s,Ct.t,Pt.a,Bt.b,Tt.b,Pt.c],pipes:[Ct.b],styles:[""]}),$t),Lt=((Gt=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.route=n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"changeRouteUrl",value:function(){this.route.navigateByUrl("/home")}}]),t}()).\u0275fac=function(t){return new(t||Gt)(c.Ob(r.h),c.Ob(i.f))},Gt.\u0275cmp=c.Ib({type:Gt,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"tabs"],["label","Groups"],["label","Participants"],[1,"routerWapper"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"mat-tab-group"),c.Tb(2,"mat-tab",1),c.Pb(3,"app-g-list"),c.Sb(),c.Tb(4,"mat-tab",2),c.Pb(5,"app-p-list"),c.Sb(),c.Sb(),c.Sb(),c.Tb(6,"div",3),c.Pb(7,"router-outlet"),c.Sb())},directives:[a.c,a.a,Ft,Nt,i.k],styles:[".routerWapper[_ngcontent-%COMP%]{overflow-y:auto}.tabs[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:10}"]}),Gt);function Rt(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",5),c.Tb(1,"e-item2",6),c.bc("addParticipant",(function(t){return c.rc(n),c.fc().addParticipant(t)})),c.Sb(),c.Sb()}if(2&t){var i=e.$implicit;c.Bb(1),c.kc("expense",i)}}var Wt=function(){return["report"]};function Dt(t,e){1&t&&(c.Tb(0,"button",7),c.Pb(1,"fa-icon",8),c.Sb()),2&t&&c.kc("routerLink",c.lc(1,Wt))}var Vt,Ht=((Vt=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.router=n,this.expense$=this.store.pipe(Object(r.t)(ft,"1231 e-list")),this.showReportBtn=!1}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.router.snapshot.url[1]),this.router.snapshot.url[1]?(this.allExpenses$=this.store.pipe(Object(r.t)(xt)),this.showReportBtn=!0):this.allExpenses$=this.store.pipe(Object(r.t)(pt)),this.expense$.subscribe((function(t){return console.log(t)}))}},{key:"ngOnChanges",value:function(){}},{key:"ngDoCheck",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"addParticipant",value:function(t){var e=t.expenseId,n=t.participantId;console.log("debug ",e,n),this.store.dispatch(B({expenseId:e,participantId:n}))}},{key:"trackBackExpense",value:function(t,e){return e.id}},{key:"addExpense",value:function(){var t=Object(It.v4)();this.store.dispatch(O({expense:{id:t,amount:null,name:"",participantIds:["1"],payedBy:"1"}})),this.router.snapshot.url[1]&&(console.log(this.router.snapshot.url[1]),this.store.dispatch(V({groupId:this.router.snapshot.url[1].toString(),expenseId:t}))),window.setTimeout((function(){return window.scrollTo(0,document.body.scrollHeight)}),0)}}]),t}()).\u0275fac=function(t){return new(t||Vt)(c.Ob(r.h),c.Ob(i.a))},Vt.\u0275cmp=c.Ib({type:Vt,selectors:[["app-e-list2"]],features:[c.zb],decls:6,vars:5,consts:[["fxLayout","row warp","fxLayoutAlign","center center","fxLayoutGap","20px",1,"main"],["class","list",4,"ngFor","ngForOf","ngForTrackBy"],["mat-fab","",1,"fab",3,"click"],["icon","plus"],["mat-fab","","class","fabreport",3,"routerLink",4,"ngIf"],[1,"list"],[3,"expense","addParticipant"],["mat-fab","",1,"fabreport",3,"routerLink"],["icon","lightbulb"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.zc(1,Rt,2,1,"div",1),c.gc(2,"async"),c.Sb(),c.Tb(3,"button",2),c.bc("click",(function(){return e.addExpense()})),c.Pb(4,"fa-icon",3),c.Sb(),c.zc(5,Dt,2,2,"button",4)),2&t&&(c.Bb(1),c.kc("ngForOf",c.hc(2,3,e.allExpenses$))("ngForTrackBy",e.trackBackExpense),c.Bb(4),c.kc("ngIf",e.showReportBtn))},styles:[".list[_ngcontent-%COMP%]{overflow-y:auto;height:80vh}.fab[_ngcontent-%COMP%]{right:30px}.fab[_ngcontent-%COMP%], .fabreport[_ngcontent-%COMP%]{position:fixed;bottom:30px}.fabreport[_ngcontent-%COMP%]{right:100px}"]}),Vt),Qt=n("itXk"),Xt=Object(r.q)(xt,rt,ct,(function(t,e,n){var i={};n.forEach((function(t){return i[t]=Object.assign(Object.assign({},e[t]),{balance:0})})),t.forEach((function(t){var e=t.amount/t.participantIds.length;t.participantIds.forEach((function(t){return i[t.toString()].balance-=e})),i[t.payedBy.toString()].balance+=t.amount})),console.log("debug reports",t),console.log("debug reports",Object.keys(i).map((function(t){return i[t].balance})));var c=[];return function(t,e){!function t(n){console.log("debug reports",n);var i=n.reduce((function(t,e,n,i){return e>i[t]?n:t}),0),r=n.reduce((function(t,e,n,i){return e<i[t]?n:t}),0);if(0!=n[i]||0!=n[r]){var a=Math.min(-n[r],n[i]);n[i]-=a,n[r]+=a,c.push({amount:a,pid:e[r],paysToId:e[i]}),t(n)}}(t)}(Object.keys(i).map((function(t){return i[t].balance})),n),c.forEach((function(t){return console.log("debug reports",i[t.pid].name,i[t.paysToId].name)})),{data:c,pWithB:i}})),Kt=function(t,e){return{greenEC:t,redEC:e}};function Zt(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"mat-card"),c.Tb(2,"mat-card-title",8),c.Ac(3),c.Sb(),c.Tb(4,"mat-card-subtitle",9),c.Tb(5,"span"),c.Ac(6),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=e.$implicit;c.Bb(3),c.Cc(" ",n.value.name," "),c.Bb(1),c.kc("ngClass",c.nc(3,Kt,n.value.balance>0,n.value.balance<0)),c.Bb(2),c.Cc(" ",n.value.balance,"")}}function Yt(t,e){if(1&t&&(c.Tb(0,"div",10),c.Tb(1,"mat-card",11),c.Tb(2,"mat-card-title",8),c.Ac(3),c.Sb(),c.Tb(4,"mat-card-subtitle"),c.Ac(5,"pays "),c.Tb(6,"span"),c.Ac(7),c.Sb(),c.Ac(8," to"),c.Sb(),c.Tb(9,"mat-card-content"),c.Ac(10),c.Sb(),c.Sb(),c.Sb()),2&t){var n=e.$implicit,i=c.fc();c.Bb(3),c.Bc(i.pWithB[n.pid].name),c.Bb(4),c.Bc(n.amount),c.Bb(3),c.Cc(" ",i.pWithB[n.paysToId].name," ")}}var Jt,te,ee=function(){return["../"]},ne=((Jt=function(){function t(e){var n=this;_classCallCheck(this,t),this.store=e,this.data=[],this.pWithB={},this.minCashFlow=function(t,e){!function t(i){console.log("debug reports",i);var c=i.reduce((function(t,e,n,i){return e>i[t]?n:t}),0),r=i.reduce((function(t,e,n,i){return e<i[t]?n:t}),0);if(0!=i[c]||0!=i[r]){var a=Math.min(-i[r],i[c]);i[c]-=a,i[r]+=a,n.data.push({amount:a,pid:e[r],paysToId:e[c]}),console.log("debug reports Person "+r+" pays "+a+" to Person "+c),t(i)}}(t)}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store.pipe(Object(r.t)(Xt)).subscribe((function(e){console.log("debug reports subscribed",e),t.data=e.data,t.pWithB=e.pWithB}))}},{key:"initData",value:function(){var t=this;Object(Qt.a)(this.store.pipe(Object(r.t)(xt)),this.store.pipe(Object(r.t)(rt)),this.store.pipe(Object(r.t)(ct))).subscribe((function(e){var n=e[0];Object.keys(e[1]).forEach((function(n){return t.pWithB[n]=Object.assign(Object.assign({},e[1][n]),{balance:0})})),n.forEach((function(e){var n=e.amount/e.participantIds.length;e.participantIds.forEach((function(e){return t.pWithB[e.toString()].balance-=n})),t.pWithB[e.payedBy.toString()].balance+=e.amount})),console.log("debug reports",n),console.log("debug reports",Object.keys(t.pWithB).map((function(e){return t.pWithB[e].balance}))),t.minCashFlow(Object.keys(t.pWithB).map((function(e){return t.pWithB[e].balance})),e[2]),t.data.forEach((function(e){return console.log("debug reports",t.pWithB[e.pid].name,t.pWithB[e.paysToId].name)}))}))}}]),t}()).\u0275fac=function(t){return new(t||Jt)(c.Ob(r.h))},Jt.\u0275cmp=c.Ib({type:Jt,selectors:[["app-e-report"]],decls:12,vars:6,consts:[[1,"rwrapper"],[1,"text"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","20px",1,"emain"],[4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap","7px",1,"emain"],["class","below",4,"ngFor","ngForOf"],["mat-fab","",1,"fab",3,"routerLink"],["icon","stream"],[1,"matCardTitle"],[3,"ngClass"],[1,"below"],[1,"expensecard"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Ac(2," Zero state logic for minimum transations"),c.Sb(),c.Tb(3,"div",2),c.zc(4,Zt,7,6,"div",3),c.gc(5,"keyvalue"),c.Sb(),c.Tb(6,"span",1),c.Ac(7," Min. Transations Requried "),c.Sb(),c.Tb(8,"div",4),c.zc(9,Yt,11,3,"div",5),c.Sb(),c.Tb(10,"button",6),c.Pb(11,"fa-icon",7),c.Sb(),c.Sb()),2&t&&(c.Bb(4),c.kc("ngForOf",c.hc(5,3,e.pWithB)),c.Bb(5),c.kc("ngForOf",e.data),c.Bb(1),c.kc("routerLink",c.lc(5,ee)))},directives:[jt.f,jt.e,jt.g,Ct.s,Bt.b,i.g,Tt.b,Pt.a,Pt.m,Pt.l,Ct.q,St.a,Pt.d],pipes:[Ct.l],styles:[".fab[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px}.emain[_ngcontent-%COMP%]{padding:20px;margin:20px;overflow-x:auto}.expensecard[_ngcontent-%COMP%]{width:25vw}.below[_ngcontent-%COMP%]{padding-top:10px}span[_ngcontent-%COMP%]{font-weight:500;font-size:medium}.text[_ngcontent-%COMP%]{padding-top:8px;display:block;margin-left:20px}.matCardTitle[_ngcontent-%COMP%]{font-size:19px}.rwrapper[_ngcontent-%COMP%]{padding:16px;height:75vh}"]}),Jt),ie=[{path:"",component:Lt,children:[{path:"group/:id",component:Ht},{path:"group/:id/report",component:ne}]}],ce=((te=function t(){_classCallCheck(this,t)}).\u0275mod=c.Mb({type:te}),te.\u0275inj=c.Lb({factory:function(t){return new(t||te)},imports:[[i.j.forChild(ie)],i.j]}),te),re=n("PCNd");Object(r.o)("home");var ae={participants:function(t,e){return m(t,e)},expenses:F,groups:function(t,e){return K(t,e)}};function oe(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Pb(1,"mat-divider"),c.Tb(2,"e-item",1),c.bc("addParticipant",(function(t){return c.rc(n),c.fc().addParticipant(t)})),c.Sb(),c.Pb(3,"mat-divider"),c.Sb()}if(2&t){var i=e.$implicit;c.Bb(2),c.kc("expense",i)}}var se,ue,pe=((ue=function(){function t(e){_classCallCheck(this,t),this.store=e,this.expense$=this.store.pipe(Object(r.t)(ft,"1231 e-list")),this.allExpensesWithParticipants$=this.store.pipe(Object(r.t)(ht))}return _createClass(t,[{key:"ngOnInit",value:function(){this.expense$.subscribe((function(t){return console.log(t)})),this.allExpensesWithParticipants$.subscribe((function(t){return console.log(t)}))}},{key:"ngOnChanges",value:function(){}},{key:"ngDoCheck",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"addParticipant",value:function(t){this.store.dispatch(B({expenseId:t.id,participantId:"3"}))}},{key:"trackBackExpense",value:function(t,e){return e.id}}]),t}()).\u0275fac=function(t){return new(t||ue)(c.Ob(r.h))},ue.\u0275cmp=c.Ib({type:ue,selectors:[["app-e-list"]],features:[c.zb],decls:2,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"expense","addParticipant"]],template:function(t,e){1&t&&(c.zc(0,oe,4,1,"div",0),c.gc(1,"async")),2&t&&c.kc("ngForOf",c.hc(1,2,e.allExpensesWithParticipants$))("ngForTrackBy",e.trackBackExpense)},styles:[""]}),ue),be=((se=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="EF"[Math.floor(2*Math.random())];return t}}]),t}()).\u0275fac=function(t){return new(t||se)},se.\u0275prov=c.Kb({token:se,factory:se.\u0275fac,providedIn:"root"}),se),le=n("A5z7"),de=n("STbY");function fe(t,e){if(1&t&&(c.Tb(0,"mat-chip"),c.Ac(1),c.Sb()),2&t){var n=e.$implicit;c.Bb(1),c.Bc(n.name)}}var he,ge=((he=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.service=n,this.addParticipantUI=!1,this.data="ehe",this.allParticipants=this.store.pipe(Object(r.t)(rt)),this.addParticipant=new c.n,this.color="#FFF"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){this.color=this.service.getRandomColor()}},{key:"ngDoCheck",value:function(){}},{key:"ngAfterContentChecked",value:function(){}},{key:"ngAfterViewChecked",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"addPartUI",value:function(){this.addParticipantUI=!0}},{key:"addPartEvent",value:function(t){this.addParticipantUI=!0,this.addParticipant.emit(t)}}]),t}()).\u0275fac=function(t){return new(t||he)(c.Ob(r.h),c.Ob(be))},he.\u0275cmp=c.Ib({type:he,selectors:[["e-item"]],inputs:{expense:"expense"},outputs:{addParticipant:"addParticipant"},features:[c.zb],decls:17,vars:6,consts:[[1,"mat-chip-list"],[4,"ngFor","ngForOf"],[3,"matMenuTriggerFor","click"],["icon","edit"],["appMenu","matMenu"],["mat-menu-item",""]],template:function(t,e){if(1&t&&(c.Tb(0,"mat-card"),c.Tb(1,"mat-card-header"),c.Tb(2,"mat-card-title"),c.Ac(3),c.Sb(),c.Tb(4,"mat-card-subtitle"),c.Ac(5),c.Sb(),c.Sb(),c.Tb(6,"mat-card-content"),c.Tb(7,"mat-chip-list",0),c.zc(8,fe,2,1,"mat-chip",1),c.Tb(9,"mat-chip",2),c.bc("click",(function(){return e.addPartEvent(e.expense)})),c.Pb(10,"fa-icon",3),c.Sb(),c.Tb(11,"mat-menu",null,4),c.Tb(13,"button",5),c.Ac(14,"Settings"),c.Sb(),c.Tb(15,"button",5),c.Ac(16,"Help"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.pc(12);c.yc("background-color",e.color),c.Bb(3),c.Bc(e.expense.name),c.Bb(2),c.Bc(e.expense.amount),c.Bb(3),c.kc("ngForOf",e.expense.participantIds),c.Bb(1),c.kc("matMenuTriggerFor",n)}},directives:[Pt.a,Pt.f,Pt.m,Pt.l,Pt.d,le.d,Ct.s,le.a,de.e,Tt.b,de.f,de.c],styles:[""],changeDetection:0}),he),me=n("2Vo4"),ve=n("d3UM"),Oe=n("3Pt+"),ye=n("FKr1");function ke(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card",9),c.bc("click",(function(){return c.rc(n),c.fc().editMode=!0})),c.Tb(1,"span"),c.Ac(2),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(2),c.Cc(" ",i.expense.name," ")}}function xe(t,e){if(1&t){var n=c.Ub();c.Tb(0,"fa-icon",12),c.bc("click",(function(){return c.rc(n),c.fc(2).editMode=!1})),c.Sb()}}function Ie(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card"),c.Tb(1,"input",10),c.bc("change",(function(t){return c.rc(n),c.fc().nameChange(t)}))("blur",(function(){return c.rc(n),c.fc().editMode=!1})),c.Sb(),c.zc(2,xe,1,0,"fa-icon",11),c.Sb()}if(2&t){var i=c.fc();c.Bb(1),c.kc("value",i.expense.name),c.Bb(1),c.kc("ngIf",i.editMode)}}function je(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card",9),c.bc("click",(function(){return c.rc(n),c.fc().editMode2=!0})),c.Tb(1,"span",9),c.bc("click",(function(){return c.rc(n),c.fc().editMode2=!0})),c.Ac(2),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(2),c.Cc(" ",i.expense.amount," ")}}function Ce(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-card"),c.Tb(1,"input",13),c.bc("blur",(function(){return c.rc(n),c.fc().editMode2=!1}))("change",(function(t){return c.rc(n),c.fc().amountChange(t)})),c.Sb(),c.Tb(2,"fa-icon",12),c.bc("click",(function(){return c.rc(n),c.fc().editMode2=!1})),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(1),c.kc("value",i.expense.amount)}}function Pe(t,e){if(1&t&&(c.Tb(0,"mat-option",17),c.Ac(1),c.Sb()),2&t){var n=e.$implicit,i=c.fc(2);c.kc("value",i.allParticipants[n]),c.Bb(1),c.Cc(" ",i.allParticipants[n].name," ")}}function Se(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",14),c.Tb(1,"mat-select",15),c.bc("ngModelChange",(function(t){return c.rc(n),c.fc().payedByParticipant=t}))("selectionChange",(function(t){return c.rc(n),c.fc().payedByParticipantChange(t)})),c.zc(2,Pe,2,2,"mat-option",16),c.Sb(),c.Sb()}if(2&t){var i=c.fc();c.Bb(1),c.kc("ngModel",i.payedByParticipant),c.Bb(1),c.kc("ngForOf",i.expense.participantIds)}}function Be(t,e){if(1&t){var n=c.Ub();c.Tb(0,"mat-chip",27),c.bc("removed",(function(){c.rc(n);var t=e.$implicit;return c.fc(2).removeParticipant(t)})),c.Ac(1),c.Sb()}if(2&t){var i=e.$implicit,r=c.fc().ngIf;c.kc("removable",!0),c.Bb(1),c.Cc(" ",r[i].name," ")}}function Te(t,e){if(1&t){var n=c.Ub();c.Rb(0),c.Tb(1,"button",28),c.bc("click",(function(){c.rc(n);var t=c.fc().$implicit,e=c.fc(2);return e.addPartEvent(e.expense,t.value)})),c.Ac(2),c.Sb(),c.Qb()}if(2&t){var i=c.fc().$implicit;c.Bb(2),c.Cc(" ",i.value.name," ")}}function Ae(t,e){if(1&t&&(c.Rb(0),c.zc(1,Te,3,1,"ng-container",6),c.Qb()),2&t){var n=e.$implicit,i=c.fc(2);c.Bb(1),c.kc("ngIf",-1==i.expense.participantIds.indexOf(n.value.id))}}function we(t,e){if(1&t){var n=c.Ub();c.Rb(0),c.Tb(1,"button",28),c.bc("click",(function(){c.rc(n);var t=e.$implicit,i=c.fc(2);return i.addPartEvent(i.expense,t)})),c.Ac(2),c.Sb(),c.Qb()}if(2&t){var i=e.$implicit;c.Bb(2),c.Cc(" ",i.name," ")}}function Me(t,e){if(1&t&&(c.Tb(0,"mat-chip",22),c.Pb(1,"fa-icon",23),c.Sb()),2&t){c.fc();var n=c.pc(11);c.kc("matMenuTriggerFor",n)}}function _e(t,e){if(1&t){var n=c.Ub();c.Rb(0),c.Tb(1,"button",28),c.bc("click",(function(){c.rc(n);var t=e.$implicit,i=c.fc(2);return i.addPartEvent(i.expense,t)})),c.Ac(2),c.Sb(),c.Qb()}if(2&t){var i=e.$implicit;c.Bb(2),c.Cc(" ",i.name," ")}}function Ee(t,e){if(1&t&&(c.Tb(0,"mat-chip",22),c.Pb(1,"fa-icon",23),c.Sb()),2&t){c.fc();var n=c.pc(18);c.kc("matMenuTriggerFor",n)}}function Fe(t,e){if(1&t&&(c.Rb(0),c.zc(1,Be,2,2,"mat-chip",18),c.Tb(2,"mat-menu",null,19),c.Tb(4,"button",20),c.Ac(5," InTemplateMenu "),c.Sb(),c.zc(6,Ae,2,1,"ng-container",21),c.gc(7,"keyvalue"),c.Sb(),c.Tb(8,"mat-chip",22),c.Pb(9,"fa-icon",23),c.Sb(),c.Tb(10,"mat-menu",null,24),c.Tb(12,"button",20),c.Ac(13," BehaviouralMenu "),c.Sb(),c.zc(14,we,3,1,"ng-container",21),c.gc(15,"async"),c.Sb(),c.zc(16,Me,2,1,"mat-chip",25),c.Tb(17,"mat-menu",null,26),c.Tb(19,"button",20),c.Ac(20," ts Menu "),c.Sb(),c.zc(21,_e,3,1,"ng-container",21),c.Sb(),c.zc(22,Ee,2,1,"mat-chip",25),c.Qb()),2&t){var n=e.ngIf,i=c.pc(3),r=c.fc();c.Bb(1),c.kc("ngForOf",r.expense.participantIds),c.Bb(5),c.kc("ngForOf",c.hc(7,7,n)),c.Bb(2),c.kc("matMenuTriggerFor",i),c.Bb(6),c.kc("ngForOf",c.hc(15,9,r.menuParticipants$)),c.Bb(2),c.kc("ngIf",r.showAdd),c.Bb(5),c.kc("ngForOf",r.menuParticipants),c.Bb(1),c.kc("ngIf",r.showAdd)}}var ze,Ue,qe,Ge=((ze=function(){function t(e,n,i){var a=this;_classCallCheck(this,t),this.store=e,this.service=n,this.router=i,this.addParticipant=new c.n,this.addParticipantUI=!1,this.menuParticipants=[],this.menuParticipants$=new me.a(null),this.color="#FFF",this.showAdd=!0,this.allParticipants$=this.store.pipe(Object(r.t)(rt)),this.updateMenu=function(){if(a.allParticipants){var t=Object.keys(a.allParticipants).filter((function(t){return-1==a.expense.participantIds.indexOf(t)})).map((function(t){return a.allParticipants[t]}));a.menuParticipants$.next(t),a.menuParticipants=t,a.showAdd=0!=t.length,console.log("debug updated ",t)}}}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e,n=this;this.editMode=""==this.expense.name,this.editMode2=null==this.expense.amount,this.allParticipants$.subscribe((function(t){n.allParticipants=t,console.log("debug all participants",t),n.updateMenu()})),this.store.pipe(Object(r.t)((e=null===(t=this.expense)||void 0===t?void 0:t.payedBy,Object(r.q)(rt,(function(t){return t[e]}))))).subscribe((function(t){return n.payedByParticipant=t})),this.menuParticipants$.subscribe((function(t){return console.log("debug menu",t)}))}},{key:"ngOnChanges",value:function(t){console.log("debug -> ",t),this.color=this.service.getRandomColor(),this.updateMenu()}},{key:"ngAfterViewInit",value:function(){console.log("debug afterviewinit",this.matMenu._allItems.length),this.showAdd=!!this.matMenu._allItems.length}},{key:"addPartUI",value:function(){this.addParticipantUI=!0}},{key:"addPartEvent",value:function(t,e){this.addParticipantUI=!0,console.log("debug addpart",e),this.addParticipant.emit({expenseId:t.id,participantId:e.id})}},{key:"payedByParticipantChange",value:function(t){var e=t.value;console.log(e.id),this.store.dispatch(M({expenseId:this.expense.id,payedById:e.id}))}},{key:"nameChange",value:function(t){console.log(t.target.value),this.store.dispatch(A({expenseId:this.expense.id,name:t.target.value}))}},{key:"amountChange",value:function(t){console.log(t.target.value);var e=0;try{e=parseInt(t.target.value),this.store.dispatch(w({expenseId:this.expense.id,amount:e}))}catch(t){}}},{key:"deleteExpense",value:function(){this.store.dispatch(C({id:this.expense.id})),this.router.snapshot.url[1]&&this.store.dispatch(H({groupId:this.router.snapshot.url[1].toString(),expenseId:this.expense.id}))}},{key:"removeParticipant",value:function(t){console.log("debug p",t),this.store.dispatch(T({expenseId:this.expense.id,participantId:t}))}}]),t}()).\u0275fac=function(t){return new(t||ze)(c.Ob(r.h),c.Ob(be),c.Ob(i.a))},ze.\u0275cmp=c.Ib({type:ze,selectors:[["e-item2"]],viewQuery:function(t,e){var n;1&t&&c.Ec(de.a,!0),2&t&&c.oc(n=c.cc())&&(e.matMenu=n.first)},inputs:{expense:"expense"},outputs:{addParticipant:"addParticipant"},features:[c.zb],decls:25,vars:10,consts:[[1,"itemwrapper"],[1,"itemmain"],[1,"minifab",3,"click"],["icon","times"],[1,"text"],[3,"click",4,"ngIf"],[4,"ngIf"],["class","selector",4,"ngIf"],[1,"mat-chip-list"],[3,"click"],["autofocus","",3,"value","change","blur"],["mat-card-avatar","","icon","check",3,"click",4,"ngIf"],["mat-card-avatar","","icon","check",3,"click"],["autofocus","",3,"value","blur","change"],[1,"selector"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matChipRemove","",3,"removable","removed",4,"ngFor","ngForOf"],["appMenu","matMenu"],["mat-menu-item","","disabled",""],[4,"ngFor","ngForOf"],[3,"matMenuTriggerFor"],["icon","plus"],["mAppMenu","matMenu"],[3,"matMenuTriggerFor",4,"ngIf"],["m2AppMenu","matMenu"],["matChipRemove","",3,"removable","removed"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"mat-card",1),c.Tb(2,"mat-card-header"),c.Tb(3,"mat-card-actions"),c.Tb(4,"button",2),c.bc("click",(function(){return e.deleteExpense()})),c.Pb(5,"fa-icon",3),c.Sb(),c.Sb(),c.Tb(6,"mat-card-title"),c.Tb(7,"span",4),c.Ac(8,"Expense "),c.Sb(),c.zc(9,ke,3,1,"mat-card",5),c.zc(10,Ie,3,2,"mat-card",6),c.Tb(11,"span",4),c.Ac(12,"Amount "),c.Sb(),c.zc(13,je,3,1,"mat-card",5),c.zc(14,Ce,3,1,"mat-card",6),c.Sb(),c.Tb(15,"mat-card-subtitle"),c.Tb(16,"span",4),c.Ac(17,"Paid By"),c.Sb(),c.zc(18,Se,3,2,"div",7),c.Sb(),c.Sb(),c.Tb(19,"mat-card-content"),c.Tb(20,"span",4),c.Ac(21,"Distribute Among"),c.Sb(),c.Tb(22,"mat-chip-list",8),c.zc(23,Fe,23,11,"ng-container",6),c.gc(24,"async"),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(1),c.yc("background-color",e.color),c.Bb(8),c.kc("ngIf",!e.editMode),c.Bb(1),c.kc("ngIf",e.editMode),c.Bb(3),c.kc("ngIf",!e.editMode2),c.Bb(1),c.kc("ngIf",e.editMode2),c.Bb(4),c.kc("ngIf",e.payedByParticipant),c.Bb(5),c.kc("ngIf",c.hc(24,8,e.allParticipants$)))},directives:[Pt.a,Pt.f,Pt.b,Tt.b,Pt.m,Ct.t,Pt.l,Pt.d,le.d,Pt.c,ve.a,Oe.p,Oe.s,Ct.s,ye.l,de.f,de.c,le.a,de.e,le.e],pipes:[Ct.b,Ct.l],styles:[".itemwrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px}.itemmain[_ngcontent-%COMP%]{width:calc(min(80vw, 300px) + 40px)}.selector[_ngcontent-%COMP%]{width:min(80vw,300px);padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.text[_ngcontent-%COMP%]{font-size:16px;color:#000;display:block;padding:20px 0 10px}.text[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-weight:500}input[_ngcontent-%COMP%]{width:calc(min(80vw, 300px) - 60px);font-size:20px;font-family:Roboto;margin:0 10px 0 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.minifab[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.2);border:#fff;border-radius:8px}"],changeDetection:0}),ze),$e=n("YUcS"),Ne=((Ue=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ue)},Ue.\u0275cmp=c.Ib({type:Ue,selectors:[["app-horizontal-list"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Ac(1,"horizontal-list works!"),c.Sb())},styles:[""]}),Ue),Le=n("cH1L"),Re=n("ihCf"),We=n("kmnG"),De=n("qFsG"),Ve=n("Xa2L"),He=n("bSwM"),Qe=n("MutI"),Xe=n("f0Cb"),Ke=n("NFeN"),Ze=n("Qu3c"),Ye=n("dNgK"),Je=n("1jcm"),tn=n("5RNC"),en=n("iadO"),nn=function(t){return{"has-focus":t}},cn=["*"],rn=((qe=function t(){_classCallCheck(this,t),this.value="",this.disabled=!1,this.hasFocus=!1}).\u0275fac=function(t){return new(t||qe)},qe.\u0275cmp=c.Ib({type:qe,selectors:[["anms-big-input"]],inputs:{placeholder:"placeholder",value:"value",disabled:"disabled"},ngContentSelectors:cn,decls:3,vars:6,consts:[[1,"big-input",3,"ngClass"],[3,"value","placeholder","disabled","focus","blur"]],template:function(t,e){1&t&&(c.jc(),c.Tb(0,"mat-card",0),c.Tb(1,"input",1),c.bc("focus",(function(){return e.hasFocus=!0}))("blur",(function(){return e.hasFocus=!1})),c.Sb(),c.ic(2),c.Sb()),2&t&&(c.kc("ngClass",c.mc(4,nn,e.hasFocus)),c.Bb(1),c.kc("value",e.value)("placeholder",e.placeholder)("disabled",e.disabled))},directives:[Pt.a,Ct.q],styles:[".big-input[_ngcontent-%COMP%]{width:100%;transition:all .5s;display:flex;padding:10px 10px 10px 20px}.big-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;border:0;font-size:20px;min-width:100px}"],changeDetection:0}),qe);function an(t,e){if(1&t&&c.Pb(0,"mat-icon",4),2&t){var n=c.fc();c.kc("fontSet",n.fontSet)("fontIcon",n.fontIcon)}}function on(t,e){if(1&t&&c.Pb(0,"fa-icon",5),2&t){var n=c.fc();c.kc("icon",n.faIcon)}}function sn(t,e){if(1&t&&(c.Tb(0,"span"),c.Ac(1),c.Sb()),2&t){var n=c.fc();c.Bb(1),c.Bc(n.label)}}var un,pn,bn=((un=function(){function t(){_classCallCheck(this,t),this.disabled=!1,this.fontSet="",this.fontIcon="",this.faIcon="",this.label="",this.color="",this.action=new c.n,this.hasFocus=!1}return _createClass(t,[{key:"onClick",value:function(){this.action.emit()}}]),t}()).\u0275fac=function(t){return new(t||un)},un.\u0275cmp=c.Ib({type:un,selectors:[["anms-big-input-action"]],inputs:{disabled:"disabled",fontSet:"fontSet",fontIcon:"fontIcon",faIcon:"faIcon",label:"label",color:"color"},outputs:{action:"action"},decls:4,vars:4,consts:[["mat-raised-button","","color","color",3,"disabled","click"],[3,"fontSet","fontIcon",4,"ngIf"],[3,"icon",4,"ngIf"],[4,"ngIf"],[3,"fontSet","fontIcon"],[3,"icon"]],template:function(t,e){1&t&&(c.Tb(0,"button",0),c.bc("click",(function(){return e.onClick()})),c.zc(1,an,1,2,"mat-icon",1),c.zc(2,on,1,1,"fa-icon",2),c.zc(3,sn,2,1,"span",3),c.Sb()),2&t&&(c.kc("disabled",e.disabled),c.Bb(1),c.kc("ngIf",e.fontSet&&e.fontIcon&&!e.faIcon),c.Bb(1),c.kc("ngIf",e.faIcon),c.Bb(1),c.kc("ngIf",e.label))},directives:[Bt.b,Ct.t,Ke.a,Tt.b],styles:["button[_ngcontent-%COMP%]{padding:0;min-width:36px;margin-left:10px}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:2px}button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;font-size:18px}"],changeDetection:0}),un),ln=n("zpSk"),dn=((pn=function t(){_classCallCheck(this,t)}).\u0275mod=c.Mb({type:pn}),pn.\u0275inj=c.Lb({factory:function(t){return new(t||pn)},imports:[[re.a,$e.a,ce,r.j.forFeature("home",ae)]]}),pn);c.uc(pe,[Ct.q,Ct.r,Ct.s,Ct.t,Ct.A,Ct.w,Ct.x,Ct.y,Ct.z,Ct.u,Ct.v,Oe.F,Oe.u,Oe.E,Oe.c,Oe.v,Oe.y,Oe.a,Oe.B,Oe.C,Oe.x,Oe.p,Oe.q,Oe.A,Oe.l,Oe.k,Oe.w,Oe.b,Oe.d,Oe.s,Oe.t,Oe.r,Oe.f,Oe.h,Oe.g,Oe.i,Oe.e,Bt.b,Bt.a,Le.b,de.f,de.c,de.e,de.b,a.c,a.d,a.a,a.f,a.e,a.b,le.d,le.a,le.c,le.e,le.b,le.f,Re.b,Re.c,We.b,We.c,We.f,We.g,We.h,We.i,We.j,De.b,De.d,Ve.a,Ve.c,He.a,He.c,Pt.a,Pt.f,Pt.n,Pt.d,Pt.m,Pt.l,Pt.b,Pt.e,Pt.k,Pt.i,Pt.h,Pt.g,Pt.o,Pt.c,Qe.a,Qe.h,Qe.d,Qe.b,ye.h,Qe.c,Qe.g,ye.n,Qe.i,Qe.f,Xe.a,ve.a,ve.c,ye.l,ye.k,Ke.a,Ze.a,Ze.c,Ye.a,Je.c,Je.a,tn.a,en.a,en.b,en.d,en.e,en.f,en.h,en.i,en.j,en.l,en.k,en.c,Tt.b,Tt.a,Tt.d,Tt.f,Tt.e,Tt.g,Tt.h,rn,bn,jt.f,jt.g,jt.e,jt.d,jt.c,jt.h,jt.a,jt.b,St.c,St.a,St.d,St.b,ln.e,ln.f,ln.g,ln.h,ln.i,ln.j,ln.k,ln.l,ln.b,ln.c,ln.d,i.k,i.g,i.i,i.h,i.m,Lt,Nt,pe,ge,Ht,Ge,Ft,ne,Ne],[Ct.b,Ct.G,Ct.p,Ct.k,Ct.E,Ct.g,Ct.C,Ct.F,Ct.d,Ct.f,Ct.i,Ct.j,Ct.l]),c.uc(Ht,[Ct.q,Ct.r,Ct.s,Ct.t,Ct.A,Ct.w,Ct.x,Ct.y,Ct.z,Ct.u,Ct.v,Oe.F,Oe.u,Oe.E,Oe.c,Oe.v,Oe.y,Oe.a,Oe.B,Oe.C,Oe.x,Oe.p,Oe.q,Oe.A,Oe.l,Oe.k,Oe.w,Oe.b,Oe.d,Oe.s,Oe.t,Oe.r,Oe.f,Oe.h,Oe.g,Oe.i,Oe.e,Bt.b,Bt.a,Le.b,de.f,de.c,de.e,de.b,a.c,a.d,a.a,a.f,a.e,a.b,le.d,le.a,le.c,le.e,le.b,le.f,Re.b,Re.c,We.b,We.c,We.f,We.g,We.h,We.i,We.j,De.b,De.d,Ve.a,Ve.c,He.a,He.c,Pt.a,Pt.f,Pt.n,Pt.d,Pt.m,Pt.l,Pt.b,Pt.e,Pt.k,Pt.i,Pt.h,Pt.g,Pt.o,Pt.c,Qe.a,Qe.h,Qe.d,Qe.b,ye.h,Qe.c,Qe.g,ye.n,Qe.i,Qe.f,Xe.a,ve.a,ve.c,ye.l,ye.k,Ke.a,Ze.a,Ze.c,Ye.a,Je.c,Je.a,tn.a,en.a,en.b,en.d,en.e,en.f,en.h,en.i,en.j,en.l,en.k,en.c,Tt.b,Tt.a,Tt.d,Tt.f,Tt.e,Tt.g,Tt.h,rn,bn,jt.f,jt.g,jt.e,jt.d,jt.c,jt.h,jt.a,jt.b,St.c,St.a,St.d,St.b,ln.e,ln.f,ln.g,ln.h,ln.i,ln.j,ln.k,ln.l,ln.b,ln.c,ln.d,i.k,i.g,i.i,i.h,i.m,Lt,Nt,pe,ge,Ht,Ge,Ft,ne,Ne],[Ct.b,Ct.G,Ct.p,Ct.k,Ct.E,Ct.g,Ct.C,Ct.F,Ct.d,Ct.f,Ct.i,Ct.j,Ct.l])},xDdU:function(t,e,n){var i,c,r=n("4fRq"),a=n("I2ZF"),o=0,s=0;t.exports=function(t,e,n){var u=e&&n||0,p=e||[],b=(t=t||{}).node||i,l=void 0!==t.clockseq?t.clockseq:c;if(null==b||null==l){var d=r();null==b&&(b=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==l&&(l=c=16383&(d[6]<<8|d[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:s+1,g=f-o+(h-s)/1e4;if(g<0&&void 0===t.clockseq&&(l=l+1&16383),(g<0||f>o)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=f,s=h,c=l;var m=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;p[u++]=m>>>24&255,p[u++]=m>>>16&255,p[u++]=m>>>8&255,p[u++]=255&m;var v=f/4294967296*1e4&268435455;p[u++]=v>>>8&255,p[u++]=255&v,p[u++]=v>>>24&15|16,p[u++]=v>>>16&255,p[u++]=l>>>8|128,p[u++]=255&l;for(var O=0;O<6;++O)p[u+O]=b[O];return e||a(p)}},xk4V:function(t,e,n){var i=n("4fRq"),c=n("I2ZF");t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var o=0;o<16;++o)e[r+o]=a[o];return e||c(a)}}}]);